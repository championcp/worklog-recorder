# WBS导航交互原型与线框图设计

## 1. 桌面端详细线框图

### 1.1 主界面线框图

#### 整体布局结构 (1440px × 900px)
```
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│  HEADER (60px)                                                                                             │
│  ┌─────────┬─────────────────┬─────────────────┬─────────────────┬─────────────────┬──────────────────────┐   │
│  │ Nobody  │  📋 项目管理    │   ➕ 新建任务    │     🔍 搜索      │    👤 用户      │   🔄 同步中...       │   │
│  │ Logger  │  ▼ 当前项目     │   📄 导入模板    │  Ctrl+K快捷搜索   │    设置菜单     │   ✅ 已同步         │   │
│  └─────────┴─────────────────┴─────────────────┴─────────────────┴─────────────────┴──────────────────────┘   │
├────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│  BREADCRUMB (40px)                                                                                         │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ 🏠 工作空间 > 📅 2024年度目标 > 📆 2024上半年 > 🗓️ Q1季度 > 📝 2024年1月    [⬆️ 返回上级] [📊 统计视图] │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
├─────────────────┬──────────────────────────────────────────────────────────────────────────────────────────┤
│                 │  MAIN CONTENT AREA                                                                       │
│  SIDEBAR        │  ┌─────────────────────────────────────────────────────────────────────────────────┐     │
│  (280px)        │  │  LEVEL HEADER                                                                   │     │
│                 │  │  ┌─────────────────────────────────────────────────────────────────────────┐   │     │
│                 │  │  │ 📝 2024年1月份任务                     [网格视图] [列表视图] [甘特图]   │   │     │
│                 │  │  │ Level 3 - Monthly Tasks                                [筛选▼] [排序▼]   │   │     │
│                 │  │  │ 总计: 12个任务 | 已完成: 8个 | 进行中: 3个 | 未开始: 1个                │   │     │
│                 │  │  │ ██████████████████████████████████████████████████████████░░░░░░░ 75%    │   │     │
│                 │  │  └─────────────────────────────────────────────────────────────────────────┘   │     │
│                 │  └─────────────────────────────────────────────────────────────────────────────────┘     │
│  ┌─────────────┐ │  ┌─────────────────────────────────────────────────────────────────────────────────┐     │
│  │ 📅 时间导航  │ │  │  TASK GRID/LIST VIEW                                                        │     │
│  │─────────────│ │  │                                                                             │     │
│  │▼ 2024年度    │ │  │  ┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌──────────────┐ │     │
│  │ ├▼ 上半年    │ │  │  │ 📋 第一周计划   │ │ 📋 第二周计划   │ │ 📋 第三周计划   │ │ ➕ 新建任务   │ │     │
│  │ │├▼ Q1季度  │ │  │  │ ⏱️  5天/7天     │ │ ⏱️  7天/7天     │ │ ⏱️  3天/7天     │ │ 点击添加     │ │     │
│  │ ││├● 1月份   │ │  │  │ 📊  85% 完成    │ │ 📊  100% 完成   │ │ 📊  45% 完成    │ │              │ │     │
│  │ ││├○ 2月份   │ │  │  │ 🏷️ [工作][重要] │ │ 🏷️ [学习]      │ │ 🏷️ [计划]      │ │              │ │     │
│  │ ││└○ 3月份   │ │  │  │ ⭐ 已收藏       │ │                │ │ ⚠️ 即将逾期     │ │              │ │     │
│  │ │└▷ Q2季度  │ │  │  └────────────────┘ └────────────────┘ └────────────────┘ └──────────────┘ │     │
│  │ └▷ 下半年    │ │  │                                                                             │     │
│  └─────────────┘ │  │  ┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌──────────────┐ │     │
│                 │  │  │ 📋 第四周计划   │ │ 📋 月度总结     │ │ 📋 下月准备     │ │              │ │     │
│  ┌─────────────┐ │  │  │ ⏱️  1天/7天     │ │ ⏱️  完成       │ │ ⏱️  0天/3天     │ │              │ │     │
│  │ 🔍 快捷筛选  │ │  │  │ 📊  15% 完成    │ │ 📊  100% 完成   │ │ 📊  0% 完成     │ │              │ │     │
│  │─────────────│ │  │  │ 🏷️ [工作]      │ │ 🏷️ [总结][重要] │ │ 🏷️ [计划]      │ │              │ │     │
│  │状态: [全部▼] │ │  │  │                │ │ ✅ 已完成       │ │                │ │              │ │     │
│  │[进行中][完成] │ │  │  └────────────────┘ └────────────────┘ └────────────────┘ └──────────────┘ │     │
│  │优先级:       │ │  └─────────────────────────────────────────────────────────────────────────────────┘     │
│  │[高][中][低]  │ │                                                                                     │
│  │─────────────│ │  ┌─────────────────────────────────────────────────────────────────────────────────┐     │
│  │📌 收藏 (3)   │ │  │  TASK DETAIL PANEL (可折叠)                                                 │     │
│  │⚡ 今日到期(2) │ │  │  ┌─────────────────────────────────────────────────────────────────────────┐   │     │
│  │🔥 逾期 (1)   │ │  │  │ 📋 第一周计划                                            [📝] [🗑️] [⭐]   │   │     │
│  │🎯 我的任务   │ │  │  │ 📝 制定本周的详细工作计划，包括日常任务和重点项目推进...                 │   │     │
│  │🎫 相关任务   │ │  │  │ ─────────────────────────────────────────────────────────────────────── │   │     │
│  └─────────────┘ │  │  │ 📅 开始: 2024-01-01  📅 结束: 2024-01-07  ⏱️ 预估: 20h  ⏰ 实际: 17h    │   │     │
│                 │  │  │ 🎯 优先级: 高  📊 进度: 85%  👥 子任务: 7个  ✅ 完成: 6个               │   │     │
│                 │  │  │ ─────────────────────────────────────────────────────────────────────── │   │     │
│                 │  │  │ 🏷️ 标签: [工作] [重要] [周计划]                                          │   │     │
│                 │  │  │ 📎 附件: 工作计划.docx (2.5MB)                                          │   │     │
│                 │  │  │ ─────────────────────────────────────────────────────────────────────── │   │     │
│                 │  │  │ 📋 子任务列表:                                        [+ 添加子任务]     │   │     │
│                 │  │  │ ✅ 制定日程安排                                    已完成 2024-01-01    │   │     │
│                 │  │  │ ✅ 整理工作清单                                    已完成 2024-01-02    │   │     │
│                 │  │  │ 🔄 准备会议材料                                    进行中              │   │     │
│                 │  │  │ ⏳ 与团队成员沟通                                  未开始              │   │     │
│                 │  │  └─────────────────────────────────────────────────────────────────────────┘   │     │
│                 │  └─────────────────────────────────────────────────────────────────────────────────┘     │
└─────────────────┴──────────────────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 任务创建/编辑弹窗线框图

#### 新建任务弹窗 (600px × 700px)
```
┌─────────────────── 新建任务 ────────────────────┐
│                                        [❌]  │
│ ┌─────────────────────────────────────────────┐ │
│ │ 基本信息                                    │ │
│ │ ─────────────────────────────────────────── │ │
│ │ 任务名称: [_________________________________│ │
│ │          制定Q1季度详细执行计划...        ] │ │
│ │                                           │ │
│ │ 上级任务: [📝 2024年1月 ▼                 ] │ │
│ │ 任务层级: [○ 周] [● 日] [○ 子任务]         │ │
│ │                                           │ │
│ │ 📝 描述: [_________________________________│ │
│ │          _________________________________ │ │
│ │          _________________________________ │ │
│ │         ]                                │ │
│ └─────────────────────────────────────────────┘ │
│                                                │
│ ┌─────────────────────────────────────────────┐ │
│ │ 时间安排                                    │ │
│ │ ─────────────────────────────────────────── │ │
│ │ 📅 开始日期: [2024-01-01 ▼]                │ │
│ │ 📅 结束日期: [2024-01-07 ▼]                │ │
│ │ ⏱️  预估工时: [____] 小时                   │ │
│ │                                           │ │
│ │ 🎯 优先级:   [○ 低] [○ 中] [● 高] [○ 紧急] │ │
│ └─────────────────────────────────────────────┘ │
│                                                │
│ ┌─────────────────────────────────────────────┐ │
│ │ 分类和标签                                  │ │
│ │ ─────────────────────────────────────────── │ │
│ │ 📂 分类: [工作 ▼]                          │ │
│ │ 🏷️  标签: [重要] [计划] [+ 添加标签]        │ │
│ │          建议标签: [季度] [执行] [管理]      │ │
│ └─────────────────────────────────────────────┘ │
│                                                │
│ ┌─────────────────────────────────────────────┐ │
│ │ 高级选项                                    │ │
│ │ ─────────────────────────────────────────── │ │
│ │ ☑️ 创建后立即开始计时                       │ │
│ │ ☑️ 生成默认子任务                           │ │
│ │ ☐ 设置提醒                                 │ │
│ │ ☐ 应用模板                                 │ │
│ └─────────────────────────────────────────────┘ │
│                                                │
│      [取消]  [保存草稿]  [保存并继续]  [保存]   │
└────────────────────────────────────────────────┘
```

### 1.3 移动端线框图

#### 移动端主界面 (375px × 812px)
```
┌─────────────────────────────────────────┐
│ ◀️ Q1季度 > 2024年1月         🔍 ⚙️      │ 60px
├─────────────────────────────────────────┤
│                                         │
│ 📝 2024年1月任务总览                     │ 80px
│ ████████████████████████████████░░░ 75% │
│ 12个任务 | 完成8个 | 进行中3个 | 未开始1个  │
│                                         │
├─────────────────────────────────────────┤
│ 📋 任务列表                  [+ 新建]   │ 40px
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🔵 第一周计划               ⭐ 85%  │ │ 80px
│ │ 📅 01/01-01/07 ⏱️ 17h/20h 👥 7     │ │
│ │ 🏷️ [工作] [重要] [周计划]          │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ ✅ 第二周计划               💯 100% │ │ 80px
│ │ 📅 01/08-01/14 ⏱️ 25h/25h 👥 5     │ │
│ │ 🏷️ [学习] [完成]                   │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🟡 第三周计划               ⚠️ 45%  │ │ 80px
│ │ 📅 01/15-01/21 ⏱️ 9h/20h 👥 8      │ │
│ │ 🏷️ [工作] [进行中] [即将逾期]       │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🔴 第四周计划               🚨 15%  │ │ 80px
│ │ 📅 01/22-01/28 ⏱️ 3h/20h 👥 6      │ │
│ │ 🏷️ [工作] [延迟]                   │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 📊 月度总结                 ✅ 100% │ │ 80px
│ │ 📅 01/29-01/31 ⏱️ 5h/5h 👥 3       │ │
│ │ 🏷️ [总结] [重要] [完成]             │ │
│ └─────────────────────────────────────┘ │
│                                         │
│           ... 更多任务 ...              │
│                                         │
├─────────────────────────────────────────┤
│ [🏠] [📋] [⏱️] [📊] [👤]              │ 60px
└─────────────────────────────────────────┘
```

#### 移动端任务详情展开
```
┌─────────────────────────────────────────┐
│ ◀️ 第一周计划                    ⭐ ⚙️   │
├─────────────────────────────────────────┤
│                                         │
│ 🔵 第一周计划                    85%    │
│ 📝 制定本周的详细工作计划，包括日常任务    │
│    和重点项目推进...                   │
│                                         │
│ ▼ 展开详情                              │
│ ─────────────────────────────────────── │
│ 📅 时间: 2024-01-01 至 2024-01-07      │
│ ⏱️ 工时: 17小时 / 20小时 (85%)         │
│ 🎯 优先级: 高                          │
│ 👥 子任务: 7个 (完成6个)                │
│                                         │
│ 🏷️ 标签:                               │
│ [工作] [重要] [周计划]                   │
│                                         │
│ 📎 附件:                               │
│ 📄 工作计划.docx (2.5MB)               │
│                                         │
│ ─────────────────────────────────────── │
│ 📋 子任务:                   [+ 添加]   │
│                                         │
│ ✅ 制定日程安排          01-01 已完成    │
│ ✅ 整理工作清单          01-02 已完成    │
│ 🔄 准备会议材料          进行中         │
│ ⏳ 与团队成员沟通        未开始         │
│ ⏳ 周报总结              未开始         │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ [⏰ 开始计时] [✏️ 编辑] [📂 归档] [🗑️]    │
│                                         │
├─────────────────────────────────────────┤
│ [🏠] [📋] [⏱️] [📊] [👤]              │
└─────────────────────────────────────────┘
```

## 2. 关键交互流程原型

### 2.1 层级导航交互流程

#### 流程1: 向下钻取(桌面端)
```
用户操作序列:
1. 当前位置: 📅 2024年度目标 (Level 0)
2. 点击任务卡片: 📆 2024上半年
3. 页面响应: 
   - 面包屑更新: 🏠 > 📅 2024年度 > 📆 2024上半年
   - 侧边导航展开到对应层级
   - 主内容区显示Q1、Q2季度任务
   - URL更新: /projects/1/wbs/2024-half-1
4. 继续点击: 🗓️ Q1季度
5. 页面响应:
   - 面包屑更新: ... > 📆 2024上半年 > 🗓️ Q1季度  
   - 显示1月、2月、3月任务
   - 层级指示器显示当前Level 2

交互细节:
- 加载动画: 骨架屏 → 内容淡入 (300ms)
- 焦点管理: 新页面首个任务获得焦点
- 历史记录: 支持浏览器前进后退
- 缓存策略: 上级层级保持内存中
```

#### 流程2: 向上返回(移动端)
```
用户操作序列:
1. 当前位置: 📝 2024年1月 (Level 3)
2. 手势操作: 从左边缘向右滑动
3. 页面响应:
   - 当前页面向右滑出 (200ms)
   - 上级页面从左侧滑入
   - 面包屑动画收回一级
   - 恢复上级页面滚动位置

替代操作:
- 点击面包屑中的上级链接
- 点击左上角返回按钮
- 使用硬件返回键(Android)

视觉反馈:
- 滑动时显示半透明预览
- 边缘高亮提示可返回区域
- 震动反馈确认操作(移动端)
```

### 2.2 任务操作交互流程

#### 流程3: 快速创建任务
```
桌面端快速创建:
1. 快捷键: Ctrl/Cmd + N
2. 弹出轻量级创建表单 (右侧抽屉, 400px宽)
3. 智能默认值:
   - 上级任务: 当前浏览层级
   - 任务层级: 当前层级+1
   - 开始日期: 今天
   - 结束日期: 根据层级智能推荐
4. 输入任务名称后按Tab键快速填写其他字段
5. 按Enter键保存, Esc键取消
6. 保存后任务卡片动画插入到列表中

移动端快速创建:
1. 点击底部浮动 "+" 按钮
2. 底部弹出创建表单 (sheet样式)
3. 只显示必要字段: 名称、描述、时间
4. 大拇指友好的按钮设计
5. 支持语音输入任务名称
6. 保存后表单下滑消失
```

#### 流程4: 拖拽移动任务(桌面端)
```
拖拽操作流程:
1. 鼠标悬停任务卡片 → 显示拖拽手柄
2. 按住拖拽手柄开始拖拽
3. 拖拽过程中:
   - 原任务卡片变半透明
   - 跟随鼠标显示拖拽预览
   - 可放置区域高亮显示
   - 显示层级变更提示
4. 释放到目标位置:
   - 显示确认对话框(如果跨层级)
   - 动画移动到新位置
   - 更新所有关联数据
5. 操作失败时回弹到原位置

跨层级拖拽:
- 拖拽到侧边导航时自动展开对应层级
- 显示"将移动到xxx层级"的提示
- 支持拖拽到面包屑上的层级链接
```

### 2.3 搜索和筛选交互流程

#### 流程5: 全局搜索
```
搜索触发:
1. 快捷键 Ctrl/Cmd + K 或点击搜索框
2. 搜索框获得焦点并高亮
3. 输入关键词触发实时搜索

搜索体验:
1. 输入1个字符后显示历史搜索
2. 输入2个字符后显示实时建议
3. 搜索结果按相关度和层级分组显示
4. 每个结果显示完整路径面包屑

结果交互:
1. 上下箭头键选择结果
2. Enter键跳转到选中结果  
3. 跳转后高亮显示目标任务
4. 显示"来自搜索"的上下文信息
5. 提供"返回搜索结果"的快捷方式

移动端搜索:
- 专门的搜索页面
- 语音搜索支持
- 搜索历史和热门搜索
- 筛选器悬浮抽屉
```

#### 流程6: 智能筛选
```
筛选器交互:
1. 点击筛选按钮显示筛选面板
2. 多选筛选条件:
   - 状态: 复选框组
   - 优先级: 颜色块选择
   - 标签: 标签云点击
   - 时间: 日期范围选择器
3. 实时应用筛选结果
4. 显示筛选状态统计
5. 一键清除所有筛选

预设筛选:
- "我的任务": 当前用户相关
- "今日到期": 今天截止的任务  
- "逾期任务": 已过期未完成
- "高优先级": 重要紧急任务
- "收藏任务": 用户收藏的任务

筛选结果处理:
- 空结果状态优雅展示
- 筛选计数实时更新
- 支持筛选结果批量操作
- 筛选条件可保存为视图
```

## 3. 响应式断点设计

### 3.1 断点定义
```css
/* 断点定义 */
@media (max-width: 640px)  /* 小屏手机 */
@media (min-width: 641px) and (max-width: 768px)  /* 大屏手机/小平板 */
@media (min-width: 769px) and (max-width: 1024px) /* 平板 */
@media (min-width: 1025px) and (max-width: 1440px) /* 桌面 */
@media (min-width: 1441px) /* 大屏桌面 */
```

### 3.2 布局适配策略

#### 小屏手机 (≤640px)
```
布局调整:
- 隐藏侧边导航，改为底部导航
- 面包屑简化为当前层级+返回按钮
- 任务卡片占满宽度，单列显示
- 搜索框收起为图标，点击展开
- 操作按钮使用底部操作表(Action Sheet)

交互优化:  
- 加大点击区域(最小44px)
- 减少嵌套层级显示
- 支持滑动手势导航
- 简化菜单选项
```

#### 平板 (641px-1024px) 
```
布局调整:
- 侧边导航可折叠，默认收起显示图标
- 任务卡片双列显示
- 面包屑完整显示但可横向滚动
- 搜索框始终可见

交互优化:
- 支持触摸和鼠标操作
- 拖拽操作优化触摸体验  
- 悬浮菜单适配触摸操作
```

#### 桌面 (≥1025px)
```
布局调整:
- 侧边导航完全展开
- 任务卡片网格显示(2-4列)
- 详情面板在右侧显示
- 完整功能菜单和工具栏

交互优化:
- 丰富的键盘快捷键
- 精确的鼠标悬浮效果
- 右键上下文菜单
- 拖拽操作支持多选
```

## 4. 动画和过渡设计

### 4.1 页面切换动画

#### 层级钻取动画
```css
/* 向下钻取 */
.level-enter {
  transform: translateX(100%);
  opacity: 0;
}
.level-enter-active {
  transform: translateX(0);
  opacity: 1;
  transition: all 300ms ease-out;
}

/* 向上返回 */
.level-exit {
  transform: translateX(0);
  opacity: 1;
}
.level-exit-active {
  transform: translateX(-100%);
  opacity: 0;
  transition: all 250ms ease-in;
}
```

#### 任务卡片动画
```css
/* 新建任务出现 */
.task-card-enter {
  transform: scale(0.8) translateY(-20px);
  opacity: 0;
}
.task-card-enter-active {
  transform: scale(1) translateY(0);
  opacity: 1;
  transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* 任务完成动画 */
.task-complete {
  animation: taskComplete 600ms ease-out forwards;
}
@keyframes taskComplete {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); filter: hue-rotate(90deg); }
  100% { transform: scale(1); opacity: 0.7; }
}
```

### 4.2 微交互动画

#### 按钮点击反馈
```css
.button {
  transition: all 150ms ease;
}
.button:active {
  transform: scale(0.95);
}
.button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
```

#### 进度条动画
```css
.progress-bar {
  background: linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%);
  transition: width 800ms cubic-bezier(0.4, 0, 0.2, 1);
}
.progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.4) 50%,
    transparent 100%
  );
  animation: shimmer 2s infinite;
}
```

## 5. 状态管理和数据流

### 5.1 组件状态设计

#### 导航状态管理
```typescript
interface NavigationState {
  currentPath: WBSPath[];
  breadcrumbs: Breadcrumb[];
  sidebarExpanded: boolean;
  currentLevel: number;
  availableLevels: Level[];
  navigationHistory: WBSPath[];
}

interface WBSPath {
  id: string;
  name: string;
  level: number;
  levelType: LevelType;
  parentId?: string;
}
```

#### 任务列表状态
```typescript
interface TaskListState {
  tasks: Task[];
  loading: boolean;
  error: string | null;
  filters: FilterState;
  sortBy: SortOption;
  viewMode: 'grid' | 'list' | 'gantt';
  selectedTasks: string[];
  pagination: PaginationState;
}

interface FilterState {
  status: TaskStatus[];
  priority: Priority[];
  tags: string[];
  dateRange: DateRange;
  assignee: string[];
}
```

### 5.2 数据获取策略

#### 层级数据预加载
```typescript
// 预加载策略
const useLevelPreload = (currentPath: WBSPath[]) => {
  const { data, prefetch } = useQuery(['wbs-hierarchy']);
  
  useEffect(() => {
    // 预加载当前层级的子层级
    if (currentPath.length > 0) {
      const currentLevel = currentPath[currentPath.length - 1];
      prefetch(['wbs-children', currentLevel.id]);
    }
    
    // 预加载兄弟层级
    if (currentPath.length > 1) {
      const parentLevel = currentPath[currentPath.length - 2];
      prefetch(['wbs-siblings', parentLevel.id]);
    }
  }, [currentPath]);
  
  return data;
};
```

#### 智能缓存机制
```typescript
// 缓存配置
const cacheConfig = {
  staleTime: 5 * 60 * 1000, // 5分钟
  cacheTime: 10 * 60 * 1000, // 10分钟
  refetchOnWindowFocus: false,
  refetchOnMount: false,
};

// 分层缓存策略
const useTaskCache = () => {
  return {
    // L1: 当前层级 (实时更新)
    current: useQuery(['tasks', currentLevelId], fetchTasks, {
      staleTime: 0,
      refetchInterval: 30000,
    }),
    
    // L2: 相邻层级 (5分钟缓存)
    adjacent: useQuery(['tasks', adjacentLevelIds], fetchTasks, cacheConfig),
    
    // L3: 其他层级 (10分钟缓存)  
    others: useQuery(['tasks', otherLevelIds], fetchTasks, {
      ...cacheConfig,
      cacheTime: 15 * 60 * 1000,
    }),
  };
};
```

## 6. 性能监控和优化

### 6.1 关键性能指标

#### 用户体验指标
```typescript
interface PerformanceMetrics {
  // 核心Web Vitals
  LCP: number; // Largest Contentful Paint < 2.5s
  FID: number; // First Input Delay < 100ms  
  CLS: number; // Cumulative Layout Shift < 0.1
  
  // 自定义指标
  TTI: number; // Time to Interactive < 3s
  navigationTime: number; // 层级切换时间 < 500ms
  taskRenderTime: number; // 任务列表渲染时间 < 200ms
  searchResponseTime: number; // 搜索响应时间 < 300ms
}
```

#### 监控实现
```typescript
// 性能监控 Hook
const usePerformanceMonitor = () => {
  const [metrics, setMetrics] = useState<PerformanceMetrics>();
  
  useEffect(() => {
    // Web Vitals 监控
    getCLS(setMetrics);
    getFID(setMetrics);
    getLCP(setMetrics);
    
    // 自定义指标监控
    monitorNavigationTiming();
    monitorRenderTiming();
  }, []);
  
  const trackUserAction = (action: string, startTime: number) => {
    const endTime = performance.now();
    const duration = endTime - startTime;
    
    // 发送到分析服务
    analytics.track('user_action_timing', {
      action,
      duration,
      level: currentLevel,
      taskCount: tasksLength,
    });
  };
  
  return { metrics, trackUserAction };
};
```

### 6.2 优化策略实施

#### 虚拟滚动优化
```typescript
// 任务列表虚拟滚动
const VirtualTaskList = ({ tasks }: { tasks: Task[] }) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [startIndex, setStartIndex] = useState(0);
  const [endIndex, setEndIndex] = useState(10);
  
  const itemHeight = 120; // 任务卡片高度
  const containerHeight = 600; // 容器高度
  const visibleCount = Math.ceil(containerHeight / itemHeight);
  const buffer = 2; // 上下缓冲区
  
  const handleScroll = useCallback(
    throttle((e: Event) => {
      const scrollTop = (e.target as HTMLElement).scrollTop;
      const newStartIndex = Math.floor(scrollTop / itemHeight);
      const newEndIndex = Math.min(
        newStartIndex + visibleCount + buffer * 2,
        tasks.length
      );
      
      setStartIndex(Math.max(0, newStartIndex - buffer));
      setEndIndex(newEndIndex);
    }, 16), // 60fps
    [tasks.length, itemHeight]
  );
  
  const visibleTasks = tasks.slice(startIndex, endIndex);
  const offsetY = startIndex * itemHeight;
  
  return (
    <div
      ref={containerRef}
      className="task-list-container"
      style={{ height: containerHeight }}
      onScroll={handleScroll}
    >
      <div style={{ height: tasks.length * itemHeight }}>
        <div style={{ transform: `translateY(${offsetY}px)` }}>
          {visibleTasks.map((task, index) => (
            <TaskCard
              key={task.id}
              task={task}
              index={startIndex + index}
            />
          ))}
        </div>
      </div>
    </div>
  );
};
```

#### 图片和资源优化
```typescript
// 任务附件图片懒加载
const LazyTaskImage = ({ src, alt }: { src: string; alt: string }) => {
  const [loaded, setLoaded] = useState(false);
  const [inView, setInView] = useState(false);
  const imgRef = useRef<HTMLImageElement>(null);
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setInView(true);
          observer.disconnect();
        }
      },
      { threshold: 0.1 }
    );
    
    if (imgRef.current) {
      observer.observe(imgRef.current);
    }
    
    return () => observer.disconnect();
  }, []);
  
  return (
    <div ref={imgRef} className="task-image-container">
      {inView && (
        <img
          src={src}
          alt={alt}
          onLoad={() => setLoaded(true)}
          style={{
            opacity: loaded ? 1 : 0,
            transition: 'opacity 300ms ease',
          }}
        />
      )}
      {!loaded && <ImageSkeleton />}
    </div>
  );
};
```

---

这份详细的交互原型和线框图设计文档提供了完整的WBS层级导航用户体验实现指南。从视觉设计到技术实现，从性能优化到用户体验，每个环节都经过深入考虑，确保最终产品能够为用户提供直观、高效、流畅的任务管理体验。